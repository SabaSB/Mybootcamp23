import boto3

def lambda_handler(event, context):
    # Extract the volume ARN from the CloudWatch event
    volume_arn = event['volume_arn']
    
    # Initialize an EC2 client
    ec2_client = boto3.client('ec2')
    
        # Get the volume ID from the ARN
        
        volume_id = volume_arn.split('/')[-1]
        
        # Modify the volume type from gp2 to gp3
        response = ec2_client.modify_volume(VolumeId=volume_id,VolumeType='gp3',Size=0,  # Specify the size of the volume (in GB) if needed))
        # Print the response for debugging
        print("Volume modification response:", response)
        
        return {'statusCode': 200,'body': 'EBS volume type modified successfully'}
    except Exception as e:
        # Handle any errors that might occur
        print("Error:", str(e))
        return {'statusCode': 500,'body':'Error modifying EBS volume type'}
